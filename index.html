<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Surat Ulang Tahun untukmu</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;500&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #f5e1ee 0%, #f5f7fa 100%);
      font-family: 'Quicksand', sans-serif;
      margin: 0;
      overflow: hidden;
    }

    .card {
      animation: fadeIn 1s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Cake styles */
    .cake {
  position: relative;
  width: 250px;
  height: 250px;
  margin: 20px auto;
  transform: scale(1);
  opacity: 0;
  transition: all 0.8s ease;
}
.cake.visible {
  opacity: 1;
  animation: popIn 0.8s ease-out;
}
@keyframes popIn {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
.plate {
  width: 280px;
  height: 30px;
  background: #ddd;
  border-radius: 50%;
  position: absolute;
  bottom: -15px;
  left: 50%;
  transform: translateX(-50%);
  box-shadow: 0 4px 6px rgba(0,0,0,0.2);
}

.layer {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  width: 200px;
  height: 50px;
  background: linear-gradient(to bottom, #ffc1cc, #ff85a2);
  border-radius: 20px;
  box-shadow: 0 3px 6px rgba(0,0,0,0.1);
}
.layer-bottom {
  bottom: 30px;
}
.layer-middle {
  bottom: 80px;
  width: 180px;
}
.layer-top {
  bottom: 125px;
  width: 160px;
}

.icing {
  position: absolute;
  width: 160px;
  height: 30px;
  background: #fff0f5;
  border-radius: 15px;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  box-shadow: inset 0 -2px 4px rgba(255,182,193,0.5);
}

.sprinkles {
  position: absolute;
  top: 5px;
  left: 10px;
  width: 140px;
  height: 20px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="20"><circle cx="5" cy="5" r="2" fill="pink"/><circle cx="15" cy="10" r="2" fill="skyblue"/><circle cx="25" cy="5" r="2" fill="violet"/><circle cx="35" cy="10" r="2" fill="gold"/></svg>') repeat-x;
  background-size: 40px 20px;
  z-index: 2;
}

.candle {
  position: absolute;
  width: 6px;
  height: 30px;
  background: linear-gradient(to bottom, #fff, #ddd);
  border-radius: 3px;
  top: -35px;
  z-index: 5;
}
.candle-1 { left: 45%; }
.candle-2 { left: 50%; }
.candle-3 { left: 55%; }

.flame {
  position: absolute;
  top: -18px;
  left: 50%;
  width: 12px;
  height: 18px;
  background: radial-gradient(ellipse at center, #ffeb3b 0%, #ff9800 70%);
  border-radius: 50% 50% 50% 50%;
  transform: translateX(-50%);
  animation: flicker 0.3s infinite alternate;
  box-shadow: 0 0 12px rgba(255, 152, 0, 0.8);
  cursor: pointer;
}

@keyframes flicker {
  0% { transform: translateX(-50%) scale(1); opacity: 1; }
  100% { transform: translateX(-50%) scale(1.1); opacity: 0.85; }
}

  </style>
</head>
<body class="flex items-center justify-center min-h-screen">

  <!-- LOADING SCREEN -->
  <div id="loading" class="text-center">
    <!-- CAKE -->
    <div class="cake">
      <div class="plate"></div>
      <div class="layer layer-bottom"></div>
      <div class="layer layer-middle"></div>
      <div class="layer layer-top"></div>
      <div class="icing">
        <div class="sprinkles"></div>
      </div>
      <div class="candle candle-1">
        <div class="flame"></div>
      </div>
      <div class="candle candle-2">
        <div class="flame"></div>
      </div>
      <div class="candle candle-3">
        <div class="flame"></div>
      </div>
    </div>

    <!-- PROGRESS BAR -->
    <div class="progress-bar">
      <div class="progress-bar-inner"></div>
    </div>
    <p class="mt-4 text-purple-700 font-medium">Menyiapkan kejutan... ðŸŽ¶</p>
  </div>

  <!-- CARD UTAMA -->
  <div id="card" class="card bg-white p-8 rounded-3xl shadow-lg text-center max-w-lg mx-auto">
    <h1 class="text-4xl font-bold mb-4 text-purple-700">Untuk Julianti Dwingsih ðŸŽ‰</h1>
    <p class="text-lg mb-6 text-gray-700">Di hari spesialmu ini, ada secarik surat penuh harapan dan kehangatan yang menantimu. Siap membaca cerita kecil untukmu?</p>
    <button onclick="startLoading()" class="btn bg-gradient-to-r from-pink-400 to-purple-400 text-white py-2 px-6 rounded-full font-medium">
      Buka Suratmu ðŸ’–
    </button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.2"></script>
  <script>
    function startLoading() {
      document.getElementById('card').style.display = 'none';
      document.getElementById('loading').classList.remove('hidden');
      localStorage.setItem('openByLetter', 'yes');
      setTimeout(() => {
        window.location.href = './main.html';
      }, 2800);
    }

    // Track extinguished flames
    let flamesExtinguished = 0;
    const flames = document.querySelectorAll(".flame");
    flames.forEach(flame => {
      flame.addEventListener("click", function () {
        this.style.display = "none";
        flamesExtinguished++;
        if (flamesExtinguished === flames.length) {
          confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
          });
        }
      });
    });
  </script>
</body>
</html>
