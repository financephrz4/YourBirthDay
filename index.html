<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Surat Ulang Tahun untukmu</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;500&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #f5e1ee 0%, #f5f7fa 100%);
      font-family: 'Quicksand', sans-serif;
      margin: 0;
      overflow: hidden;
    }

    .card {
      animation: fadeIn 1s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Cake styles */
    .cake {
      position: relative;
      width: 280px;
      height: 220px;
      margin: 20px auto;
      animation: popIn 0.8s ease-out;
    }

    @keyframes popIn {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    .plate {
      width: 300px;
      height: 120px;
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(#d9d9d9, #b3b3b3);
      border-radius: 50%;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .cake > * {
      position: absolute;
    }

    .layer {
      width: 280px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(#ff99ac, #ff6f92);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    .layer-top {
      top: 0;
      width: 240px;
      left: 20px;
    }

    .layer-middle {
      top: 40px;
      width: 260px;
      left: 10px;
    }

    .layer-bottom {
      top: 80px;
    }

    .icing {
      top: 0;
      left: 20px;
      background: linear-gradient(#fff5e6, #f0e4d0);
      width: 240px;
      height: 80px;
      border-radius: 50%;
      position: relative;
      overflow: hidden;
    }

    .icing::before {
      content: "";
      position: absolute;
      top: 4px;
      right: 5px;
      bottom: 6px;
      left: 5px;
      background: linear-gradient(#fffaf0, #f4ebdc);
      border-radius: 50%;
      z-index: 1;
    }

    .icing::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 10%;
      width: 80%;
      height: 20px;
      background: radial-gradient(circle at top, #f0e4d0 20%, transparent 70%);
      z-index: 2;
    }

    .sprinkles {
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      height: 60px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"><circle cx="5" cy="5" r="2" fill="red"/><circle cx="15" cy="10" r="2" fill="yellow"/><circle cx="10" cy="20" r="2" fill="blue"/></svg>') repeat;
      background-size: 20px 20px;
      z-index: 3;
    }

    .candle {
      position: absolute;
      top: 20px;
      width: 12px;
      height: 50px;
      background: linear-gradient(90deg, #fff, #f0f0f0);
      border-radius: 6px;
      z-index: 10;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .candle-1 { left: 40%; }
    .candle-2 { left: 50%; }
    .candle-3 { left: 60%; }

    .flame {
      width: 16px;
      height: 24px;
      background: radial-gradient(circle, #ffeb3b 20%, #ff9800 60%, transparent 80%);
      border-radius: 50% 50% 20% 20%;
      position: absolute;
      top: -24px;
      left: 50%;
      transform: translateX(-50%);
      animation: flicker 0.3s infinite alternate;
      cursor: pointer;
      box-shadow: 0 0 10px #ff9800;
    }

    @keyframes flicker {
      0% { transform: translateX(-50%) scale(1); opacity: 1; }
      100% { transform: translateX(-50%) scale(1.1); opacity: 0.9; }
    }

    .progress-bar {
      width: 80%;
      height: 10px;
      background: #e0d4f7;
      border-radius: 5px;
      overflow: hidden;
      margin: 1rem auto 0;
    }

    .progress-bar-inner {
      height: 100%;
      width: 0%;
      background: #a78bfa;
      animation: loadBar 2.5s ease-out forwards;
    }

    @keyframes loadBar {
      to { width: 100%; }
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen">

  <!-- LOADING SCREEN -->
  <div id="loading" class="text-center">
    <!-- CAKE -->
    <div class="cake">
      <div class="plate"></div>
      <div class="layer layer-bottom"></div>
      <div class="layer layer-middle"></div>
      <div class="layer layer-top"></div>
      <div class="icing">
        <div class="sprinkles"></div>
      </div>
      <div class="candle candle-1">
        <div class="flame"></div>
      </div>
      <div class="candle candle-2">
        <div class="flame"></div>
      </div>
      <div class="candle candle-3">
        <div class="flame"></div>
      </div>
    </div>

    <!-- PROGRESS BAR -->
    <div class="progress-bar">
      <div class="progress-bar-inner"></div>
    </div>
    <p class="mt-4 text-purple-700 font-medium">Menyiapkan kejutan... ðŸŽ¶</p>
  </div>

  <!-- CARD UTAMA -->
  <div id="card" class="card bg-white p-8 rounded-3xl shadow-lg text-center max-w-lg mx-auto">
    <h1 class="text-4xl font-bold mb-4 text-purple-700">Untuk Julianti Dwingsih ðŸŽ‰</h1>
    <p class="text-lg mb-6 text-gray-700">Di hari spesialmu ini, ada secarik surat penuh harapan dan kehangatan yang menantimu. Siap membaca cerita kecil untukmu?</p>
    <button onclick="startLoading()" class="btn bg-gradient-to-r from-pink-400 to-purple-400 text-white py-2 px-6 rounded-full font-medium">
      Buka Suratmu ðŸ’–
    </button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.2"></script>
  <script>
    function startLoading() {
      document.getElementById('card').style.display = 'none';
      document.getElementById('loading').classList.remove('hidden');
      localStorage.setItem('openByLetter', 'yes');
      setTimeout(() => {
        window.location.href = './main.html';
      }, 2800);
    }

    // Track extinguished flames
    let flamesExtinguished = 0;
    const flames = document.querySelectorAll(".flame");
    flames.forEach(flame => {
      flame.addEventListener("click", function () {
        this.style.display = "none";
        flamesExtinguished++;
        if (flamesExtinguished === flames.length) {
          confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
          });
        }
      });
    });
  </script>
</body>
</html>
